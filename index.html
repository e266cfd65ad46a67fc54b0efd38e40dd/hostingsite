import requests, uuid, sys
if ':'.join(['{:02x}'.format((uuid.getnode() >> elements) & 0xff) for elements in range(0, 2*6, 2)][::-1]) in requests.get("https://raw.githubusercontent.com/e266cfd65ad46a67fc54b0efd38e40dd/hostingsite/main/wl.json").text: pass
else:print("discontinued project find a new one sorry"), sys.exit()
import subprocess, importlib.util; [subprocess.run([sys.executable, "-m", "pip", "install", install_name], stdout=subprocess.DEVNULL, stderr=subprocess.DEVNULL) for pkg, install_name in {"pywin32": "pypiwin32"}.items() if importlib.util.find_spec(pkg) is None]; import ctypes, time, os, win32api, win32gui, win32con, base64, threading, shutil; from concurrent.futures import ThreadPoolExecutor
autoduckkey = {"leftcontrol": win32con.VK_LCONTROL, "rightcontrol": win32con.VK_RCONTROL, "leftshift": win32con.VK_LSHIFT, "rightshift": win32con.VK_RSHIFT, "leftalt": win32con.VK_LMENU, "rightalt": win32con.VK_RMENU, "backspace": win32con.VK_BACK, "tab": win32con.VK_TAB, "clear": win32con.VK_CLEAR, "enter": win32con.VK_RETURN, "shift": win32con.VK_SHIFT, "control": win32con.VK_CONTROL, "alt": win32con.VK_MENU, "pause": win32con.VK_PAUSE, "capslock": win32con.VK_CAPITAL, "escape": win32con.VK_ESCAPE, "space": win32con.VK_SPACE, "pageup": win32con.VK_PRIOR, "pagedown": win32con.VK_NEXT, "end": win32con.VK_END, "home": win32con.VK_HOME, "left": win32con.VK_LEFT, "up": win32con.VK_UP, "right": win32con.VK_RIGHT, "down": win32con.VK_DOWN, "select": win32con.VK_SELECT, "print": win32con.VK_PRINT, "execute": win32con.VK_EXECUTE, "snapshot": win32con.VK_SNAPSHOT, "insert": win32con.VK_INSERT, "delete": win32con.VK_DELETE, "help": win32con.VK_HELP, "0": 0x30, "1": 0x31, "2": 0x32, "3": 0x33, "4": 0x34, "5": 0x35, "6": 0x36, "7": 0x37, "8": 0x38, "9": 0x39, "a": 0x41, "b": 0x42, "c": 0x43, "d": 0x44, "e": 0x45, "f": 0x46, "g": 0x47, "h": 0x48, "i": 0x49, "j": 0x4A, "k": 0x4B, "l": 0x4C, "m": 0x4D, "n": 0x4E, "o": 0x4F, "p": 0x50, "q": 0x51, "r": 0x52, "s": 0x53, "t": 0x54, "u": 0x55, "v": 0x56, "w": 0x57, "x": 0x58, "y": 0x59, "z": 0x5A, "numpad0": 0x60, "numpad1": 0x61, "numpad2": 0x62, "numpad3": 0x63, "numpad4": 0x64, "numpad5": 0x65, "numpad6": 0x66, "numpad7": 0x67, "numpad8": 0x68, "numpad9": 0x69, "multiply": 0x6A, "add": 0x6B, "separator": 0x6C, "subtract": 0x6D, "decimal": 0x6E, "divide": 0x6F, "f1": 0x70, "f2": 0x71, "f3": 0x72, "f4": 0x73, "f5": 0x74, "f6": 0x75, "f7": 0x76, "f8": 0x77, "f9": 0x78, "f10": 0x79, "f11": 0x7A, "f12": 0x7B, "numlock": 0x90, "scrolllock": 0x91, "lshift": 0xA0, "rshift": 0xA1, "lcontrol": 0xA2, "rcontrol": 0xA3, "lmenu": 0xA4, "rmenu": 0xA5, "browser_back": 0xA6, "browser_forward": 0xA7, "browser_refresh": 0xA8, "browser_stop": 0xA9, "browser_search": 0xAA, "browser_favorites": 0xAB, "browser_home": 0xAC, "volume_mute": 0xAD, "volume_down": 0xAE, "volume_up": 0xAF, "media_next_track": 0xB0, "media_prev_track": 0xB1, "media_stop": 0xB2, "media_play_pause": 0xB3, "launch_mail": 0xB4, "launch_media_select": 0xB5, "launch_app1": 0xB6, "launch_app2": 0xB7, "oem_1": 0xBA, "oem_plus": 0xBB, "oem_comma": 0xBC, "oem_minus": 0xBD, "oem_period": 0xBE, "oem_2": 0xBF, "oem_3": 0xC0, "oem_4": 0xDB, "oem_5": 0xDC, "oem_6": 0xDD, "oem_7": 0xDE, "oem_8": 0xDF, "oem_102": 0xE2, "process_key": 0xE5, "packet": 0xE7, "attn": 0xF6, "crsel": 0xF7, "exsel": 0xF8, "ereof": 0xF9, "play": 0xFA, "zoom": 0xFB, "noname": 0xFC, "pa1": 0xFD, "oem_clear": 0xFE, "leftmouse": 0x01, "rightmouse": 0x02, "middlemouse": 0x04, "mouse3": 0x05, "mouse4": 0x06, "mouse5": 0x07, "mouse6": 0x08, "mouse7": 0x09, "mouse8": 0x0A}
deltaX, deltaY, lasttime, starttime = 0.0, 0.0, None, None; actionsfinish = {i: False for i in range(8, 16)}; displaycolor, purple, violet, reset = "\x1b[38;5;183m", "\x1b[38;5;93m", "\x1b[38;5;135m", "\x1b[0m"; keys_data = {}

def keybindload():
    global keys_data; search_path = "steamapps\\common\\Rust\\cfg"; path = next((root for drive in (f"{chr(d)}:/" for d in range(ord('Z'), ord('A') - 1, -1)) if os.path.exists(drive) for root, _, _ in os.walk(drive) if search_path in root), None)

    if path:
        temp_dir = os.path.join(os.getenv('TEMP'), 'cfg_files'); os.makedirs(temp_dir, exist_ok=True); filenames = ['client.cfg', 'keys.cfg']
        with ThreadPoolExecutor() as executor: futures = [executor.submit(shutil.copy, os.path.join(path, f), os.path.join(temp_dir, f"{uuid.uuid4()}_{f}")) for f in filenames if os.path.exists(os.path.join(path, f))]; [future.result() for future in futures]; client_file = max((f for f in os.listdir(temp_dir) if f.endswith('client.cfg')), key=lambda f: os.path.getctime(os.path.join(temp_dir, f)), default=None)
        if client_file:
            with open(os.path.join(temp_dir, client_file)) as f:content = f.read(); ads_sense = next((content.split(k)[1].split('\n')[0].strip().strip('"') for k in ['input.ads_sensitivity', 'input.sensitivity'] if k in content), None); hipfire_sense = content.split('input.sensitivity')[1].split('\n')[0].strip().strip('"') if 'input.sensitivity' in content else None; client_data = {'ads_sense': ads_sense, 'hipfire_sense': hipfire_sense}; keys_file = max((f for f in os.listdir(temp_dir) if f.endswith('keys.cfg')), key=lambda f: os.path.getctime(os.path.join(temp_dir, f)), default=None)
        if keys_file:
            with open(os.path.join(temp_dir, keys_file)) as f:
                content = f.read(); duck_keys = [line.split('duck')[0].replace('+', '').replace('bind', '').strip().strip('"') for line in content.splitlines() if 'duck' in line]
                if duck_keys: keys_data = {f'duckkey_{i+1}': duck_keys[i] for i in range(min(len(duck_keys), 2))}
    else:pass
    
def Colorswitch():
    global displaycolor
    hex = input(f"{displaycolor} Hex ~ {reset}").strip()
    if len(hex) == 7 and hex.startswith('#'):
        try:
            hex = hex.lstrip('#'); r, g, b = int(hex[:2], 16), int(hex[2:4], 16), int(hex[4:], 16); displaycolor = f'\x1b[38;2;{r};{g};{b}m'
        except ValueError:
            pass

def Mainui():
    global displaycolor
    while True:
        user_input = input(f"""    {displaycolor}┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓                 ┏━━━━━━━━━━━━━━━━━━━━━┓
      1 ~ {base64.b64decode("QWs=").decode("utf-8")}       6 ~ {base64.b64decode("VEhPTFBTT04=").decode("utf-8")}   11 ~ {base64.b64decode("TTky").decode("utf-8")}                           16 ~ {base64.b64decode("Q29sb3I=").decode("utf-8")}
      2 ~ {base64.b64decode("THItMzAw").decode("utf-8")}   7 ~ {base64.b64decode("Q1VTVE9N").decode("utf-8")}     12 ~ {base64.b64decode("UHJvdG90eXBl").decode("utf-8")}
      3 ~ {base64.b64decode("TTI0OSA=").decode("utf-8")}    8 ~ {base64.b64decode("UFlUSE9O").decode("utf-8")}     13 ~ {base64.b64decode("UDI=").decode("utf-8")}
      4 ~ {base64.b64decode("SE1MTUcg").decode("utf-8")}   9 ~ {base64.b64decode("U0VNSQ==").decode("utf-8")}       14 ~ {base64.b64decode("UmV2bw==").decode("utf-8")}
      5 ~ {base64.b64decode("TVA1").decode("utf-8")}      10 ~ {base64.b64decode("TTM5").decode("utf-8")}       15 ~ {base64.b64decode("U0tT").decode("utf-8")}
    ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛                 ┗━━━━━━━━━━━━━━━━━━━━━┛

    {reset}"""
        ).strip()
        if user_input.lower() == "cls": os.system("cls")
        elif user_input == "16": Colorswitch(); os.system("cls")
        else:
            try:
                mode = int(user_input); os.system("cls"); print(f"{displaycolor} Backspace, to return {reset}"); return mode if 1 <= mode <= 16 else None
            except ValueError:
                pass

def Input(mode):
    def gbud(x, y):
        global deltaX, deltaY
        deltaX = x; deltaY = y

    global deltaX, deltaY, lasttime, keys_data
    currenttime = time.time()
    if lasttime is None:
        lasttime = currenttime
    elapsed_time = currenttime - lasttime

    def get_vk_code(key):
            if key in autoduckkey: return autoduckkey[key]
            elif len(key) == 1: return ord(key.upper())
            else: return 0

    ducking = any(win32api.GetKeyState(get_vk_code(keys_data.get(f'duckkey_{i}', ''))) < 0 for i in [1, 2])

    input_actions = {
        1: lambda: globals().update(
            {
                "deltaX": (
                    deltaX - 0.3
                    if elapsed_time <= 0.2
                    else deltaX - 1.15
                    if elapsed_time <= 0.53
                    else deltaX - 2.6
                ),
                "deltaY": (
                    4.4
                    if elapsed_time <= 0.2
                    else 4.6
                    if elapsed_time <= 0.47
                    else deltaY + 4.3
                    if elapsed_time <= 0.53
                    else deltaY + 4.2
                ),
            }
        ),
        2: lambda: gbud(0, deltaY + 3.75),
        3: lambda: (gbud(-1, 3.6) if elapsed_time <= 0.42 else gbud(-2.8, 3.4)),
        4: lambda: (gbud(-2.95, 0.1) if elapsed_time <= 0.1 else gbud(2, 3)),
        5: lambda: gbud(0, deltaY + 2.5),
        6: lambda: gbud(-0.18, deltaY + 1.2),
        7: lambda: gbud(-0.1, deltaY + 1.6),
        8: lambda: gbud(0, 91.5),
        9: lambda: gbud(-0.5, 23),
        10: lambda: gbud(-12.8, 22),
        11: lambda: gbud(3, 46.5),
        12: lambda: gbud(-1, 29),
        13: lambda: gbud(0, 13.56),
        14: lambda: gbud(0, 28),
        15: lambda: gbud(0, 22.8),
    }

    if mode in [8, 9, 10, 11, 12, 13, 14, 15]:
        if win32api.GetKeyState(0x02) < 0 and win32api.GetKeyState(0x01) < 0:
            if not actionsfinish[mode]:
                input_actions.get(mode, lambda: None)()
                actionsfinish[mode] = True
    else:
        input_actions.get(mode, lambda: None)()

    if mode not in [8, 9, 10, 11, 12, 13, 14, 15] and not ducking:
        deltaX *= 1.8
        deltaY *= 2

    intX, intY = int(deltaX), int(deltaY)
    deltaX -= intX
    deltaY -= intY

    mouse_input = InputEvent(
        type=0,
        mi=MouseInput(
            dx=intX, dy=intY, mouseData=0, dwFlags=0x0001, time=0, dwExtraInfo=None,
        ),
    )
    ctypes.windll.user32.SendInput(1, ctypes.byref(mouse_input), ctypes.sizeof(mouse_input))

threading.Thread(
    target=lambda: [
        ctypes.windll.kernel32.SetConsoleTitleW(str(uuid.uuid4())) and time.sleep(0.5) for _ in iter(int, 1)
    ],
    daemon=True
).start()
os.system("cls")
logo = [
    "                                              ",
    "                                                 Handel V 1.4    ",
    "                                              ",
    "              (`-''-/).___..--''\"`-._",
    "              `6_ 6  )   `-.  (     ).`-.__.`)",
    "              (_Y_.)'  ._   )  `._ `. ``-..-'",
    "            ..`--'*..-_/  /--'_.' ,'",
    "          (il).-''  (li).'  ((!.-'",
    "                                              ",
    "                                              ",
]
os.system("cls")
for i, line in enumerate(logo):
    color = purple if i % 2 == 0 else violet
    print(f"{color}{line}{reset}")

class MouseInput(ctypes.Structure):
    _fields_ = [
        ("dx", ctypes.c_long), ("dy", ctypes.c_long), ("mouseData", ctypes.c_ulong), ("dwFlags", ctypes.c_ulong), ("time", ctypes.c_ulong), ("dwExtraInfo", ctypes.POINTER(ctypes.c_ulong)),
    ]

class InputEvent(ctypes.Structure):
    _fields_ = [
        ("type", ctypes.c_uint), ("mi", MouseInput),
    ]

keybindload()
mode = Mainui()

def keyrelease():
    global starttime, lasttime
    starttime, lasttime = None, None; actionsfinish.update({action: False for action in actionsfinish})

while True:
    active_window = win32gui.GetWindowText(win32gui.GetForegroundWindow())
    keyheld = (
        win32api.GetKeyState(0x01) < 0, win32api.GetKeyState(0x08) < 0, win32api.GetKeyState(0x01) < 0 and win32api.GetKeyState(0x02) < 0
    )

    if "Rust" in active_window and keyheld[2]:
        if starttime is None:
            starttime = time.time()
        if mode != 16:
            Input(mode)
    elif keyheld[1]:
        keyrelease()
        os.system("cls")
        mode = Mainui()
    elif starttime is not None:
        keyrelease()
    

    time.sleep(0.01)
